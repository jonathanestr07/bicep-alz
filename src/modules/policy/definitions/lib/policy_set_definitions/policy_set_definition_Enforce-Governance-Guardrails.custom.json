{
  "name": "Enforce-GR-Governance",
  "type": "Microsoft.Authorization/policySetDefinitions",
  "apiVersion": "2021-06-01",
  "scope": null,
  "properties": {
    "policyType": "Custom",
    "displayName": "Enforce recommended guardrails for Azure Governance",
    "description": "Azure Governance Baseline for Tagging, Hybrid Use Benefits and other governance constructs.",
    "metadata": {
      "version": "1.0.0",
      "category": "Governance",
      "source": "https://github.com/Insight-Services-APAC/azure-landing-zones-bicep/",
      "_deployed_by_insight": true
    },
    "parameters": {
      "environmentTag": {
        "metadata": {
          "description": "The environment Tag."
        },
        "type": "String"
      },
      "ownerTag": {
        "metadata": {
          "description": "The owner Tag."
        },
        "type": "String"
      },
      "dataClassificationTag": {
        "metadata": {
          "description": "The dataClassification Tag."
        },
        "type": "String"
      },
      "criticalityTag": {
        "metadata": {
          "description": "The criticality Tag."
        },
        "type": "String"
      },
      "costCenterTag": {
        "metadata": {
          "description": "The costCenter Tag."
        },
        "type": "String"
      },
      "contactEmailTag": {
        "metadata": {
          "description": "The contactEmail Tag."
        },
        "type": "String"
      },
      "applicationNameTag": {
        "metadata": {
          "description": "The App Id Tag."
        },
        "type": "String"
      }
    },
    "policyDefinitions": [
      {
        "policyDefinitionReferenceId": "appendAzureHub",
        "policyDefinitionId": "${varTargetManagementGroupResourceId}/providers/Microsoft.Authorization/policyDefinitions/Append-AzureHub",
        "parameters": {},
        "groupNames": []
      },
      {
        "policyDefinitionReferenceId": "appendCreatedDate",
        "policyDefinitionId": "${varTargetManagementGroupResourceId}/providers/Microsoft.Authorization/policyDefinitions/Append-CreatedDate-Tag",
        "parameters": {},
        "groupNames": []
      },
      {
        "policyDefinitionReferenceId": "inheritEnvTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/40df99da-1232-49b1-a39a-6da8d878f469",
        "parameters": {
          "tagName": {
            "value": "[[parameters('environmentTag')]"
          }
        }
      },
      {
        "policyDefinitionReferenceId": "addEnvTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/726aca4c-86e9-4b04-b0c5-073027359532",
        "parameters": {
          "tagName": {
            "value": "[[parameters('environmentTag')]"
          },
          "tagValue": {
            "value": ""
          }
        }
      },
      {
        "policyDefinitionReferenceId": "addOwnerTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/726aca4c-86e9-4b04-b0c5-073027359532",
        "parameters": {
          "tagName": {
            "value": "[[parameters('ownerTag')]"
          },
          "tagValue": {
            "value": ""
          }
        }
      },
      {
        "policyDefinitionReferenceId": "inheritOwnerTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/9ea02ca2-71db-412d-8b00-7c7ca9fcd32d",
        "parameters": {
          "tagName": {
            "value": "[[parameters('ownerTag')]"
          }
        }
      },
      {
        "policyDefinitionReferenceId": "addClassificationTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/726aca4c-86e9-4b04-b0c5-073027359532",
        "parameters": {
          "tagName": {
            "value": "[[parameters('dataClassificationTag')]"
          },
          "tagValue": {
            "value": ""
          }
        }
      },
      {
        "policyDefinitionReferenceId": "inheritClassificationTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/9ea02ca2-71db-412d-8b00-7c7ca9fcd32d",
        "parameters": {
          "tagName": {
            "value": "[[parameters('dataClassificationTag')]"
          }
        }
      },
      {
        "policyDefinitionReferenceId": "addCriticalityTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/726aca4c-86e9-4b04-b0c5-073027359532",
        "parameters": {
          "tagName": {
            "value": "[[parameters('criticalityTag')]"
          },
          "tagValue": {
            "value": ""
          }
        }
      },
      {
        "policyDefinitionReferenceId": "inheritCriticalityTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/9ea02ca2-71db-412d-8b00-7c7ca9fcd32d",
        "parameters": {
          "tagName": {
            "value": "[[parameters('criticalityTag')]"
          }
        }
      },
      {
        "policyDefinitionReferenceId": "addCostTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/726aca4c-86e9-4b04-b0c5-073027359532",
        "parameters": {
          "tagName": {
            "value": "[[parameters('costCenterTag')]"
          },
          "tagValue": {
            "value": ""
          }
        }
      },
      {
        "policyDefinitionReferenceId": "inheritCostTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/9ea02ca2-71db-412d-8b00-7c7ca9fcd32d",
        "parameters": {
          "tagName": {
            "value": "[[parameters('costCenterTag')]"
          }
        }
      },
      {
        "policyDefinitionReferenceId": "addContactEmailTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/726aca4c-86e9-4b04-b0c5-073027359532",
        "parameters": {
          "tagName": {
            "value": "[[parameters('contactEmailTag')]"
          },
          "tagValue": {
            "value": ""
          }
        }
      },
      {
        "policyDefinitionReferenceId": "inheritContactEmailTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/9ea02ca2-71db-412d-8b00-7c7ca9fcd32d",
        "parameters": {
          "tagName": {
            "value": "[[parameters('contactEmailTag')]"
          }
        }
      },
      {
        "policyDefinitionReferenceId": "addAppNameTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/726aca4c-86e9-4b04-b0c5-073027359532",
        "parameters": {
          "tagName": {
            "value": "[[parameters('applicationNameTag')]"
          },
          "tagValue": {
            "value": ""
          }
        }
      },
      {
        "policyDefinitionReferenceId": "inheritAppNameTag",
        "policyDefinitionId": "/providers/Microsoft.Authorization/policyDefinitions/9ea02ca2-71db-412d-8b00-7c7ca9fcd32d",
        "parameters": {
          "tagName": {
            "value": "[[parameters('applicationNameTag')]"
          }
        }
      }
    ],
    "policyDefinitionGroups": null
  }
}
